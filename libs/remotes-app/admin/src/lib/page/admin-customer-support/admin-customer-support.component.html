<div class="p-4">
  <ng-template mat-tab-label>
    <img src="https://img.icons8.com/ios-glyphs/24/null/user--v1.png" />
    <label class="ml-2 cursor-pointer">User Management</label>
  </ng-template>
  <div class="rounded user-management-container border shadow md:p-4 sm:p-2">
    <div class="table-container relative mt-4">
      <div class="card">
        <p-table [value]="tickets"
                 [paginator]="true"
                 [rows]="pagination.take"
                 [totalRecords]="pagination.itemCount!"
                 [showCurrentPageReport]="true"
                 [tableStyle]="{ 'min-width': '50rem' }"
                 currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries">
          <ng-template pTemplate="header">
            <tr>
              <th style="width: 15%">User</th>
              <th style="width: 15%">Title</th>
              <th style="width: 25%">Content</th>
              <th style="width: 20%">Replied</th>
              <th style="width: 15%">Created At</th>
              <th style="width: 10%">Action</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body"
                       let-ticket>
            <tr>
              <td>{{ ticket.createdBy }}</td>
              <td>
                {{ ticket.title }}
              </td>
              <td>{{ ticket.content }}</td>
              <td>
                <span *ngIf="ticket.replies.length > 0"
                      class="mx-auto">
                  <i class="pi pi-check-circle"
                     style="color: green"></i>
                </span>
                <span *ngIf="ticket.replies.length === 0"
                      class="mx-auto">
                  <i class="pi pi-times-circle"
                     style="color: red"></i>
                </span>
              </td>
              <td>{{ ticket.createdAt | date }}</td>
              <td>
                <div class="flex flex-row">
                  <button type="button"
                          icon="pi pi-pencil"
                          class="mr-2 inline-flex justify-center rounded-md bg-indigo-600 py-2 px-3 text-sm font-semibold text-white shadow-sm hover:bg-indigo-300 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"
                          (click)="openDialog(ticket._id)">
                    Reply
                  </button>
                </div>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
  </div>
</div>
